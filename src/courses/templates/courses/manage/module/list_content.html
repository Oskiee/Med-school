{% extends "Base007_script.html" %}
{% load static %}
{% load course %}
{% block content %}
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <title>Course_page</title>
<link rel="stylesheet" href="{% static "css/Course_page.css" %}" media="screen">
{#    <link rel="stylesheet" href="{% static "css/W3.css" %}">#}
    <meta name="generator" content="Nicepage 5.6.2, nicepage.com">
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
    <link id="u-page-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,300i,400,400i,500,500i,700,700i">
    
    
    <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": "Site2",
		"logo": "{% static "img/default-logo" %}"
}</script>

<style>
ul.content-types li {
list-style : none;
float : left;
margin : 10px;
padding : 8px 14px;
}
</style>


    {#    STYLESHEET    #}


    <style>
    .w3-sidebar{height:100%;width:200px;background-color:#fff;position:fixed!important;z-index:1;overflow:auto}
    .w3-cust,.w3-hover-cust:hover{color:#000!important;background-color:#f3ebcf!important}
    .w3-border-0{border:0!important}.w3-border{border:1px solid #fff!important}
    .w3-bar-block .w3-dropdown-hover,.w3-bar-block .w3-dropdown-click{width:100%}
    .w3-bar-block .w3-dropdown-hover .w3-dropdown-content,.w3-bar-block .w3-dropdown-click .w3-dropdown-content{min-width:100%}
    .w3-bar-block .w3-dropdown-hover .w3-button,.w3-bar-block .w3-dropdown-click .w3-button{width:100%;text-align:left;padding:8px 16px}
    .w3-bar-block .w3-bar-item{width:100%;display:block;padding:8px 16px;text-align:left;border:none;white-space:normal;float:none;outline:0}
    .w3-bar-block.w3-center .w3-bar-item{text-align:center}.w3-block{display:block;width:100%}
    .w3-bar .w3-bar-item{padding:8px 16px;float:left;width:auto;border:none;display:block;outline:0}
    .w3-bar-block .w3-bar-item{width:100%;display:block;padding:8px 16px;text-align:left;border:none;white-space:normal;float:none;outline:0}
    .w3-btn,.w3-button{border:none;display:inline-block;padding:8px 16px;vertical-align:middle;overflow:hidden;text-decoration:none;color:inherit;background-color:inherit;text-align:center;cursor:pointer;white-space:nowrap}
    .w3-bar .w3-button{white-space:normal}
    .w3-btn,.w3-button{border:none;display:inline-block;padding:8px 16px;vertical-align:middle;overflow:hidden;text-decoration:none;color:inherit;background-color:inherit;text-align:center;cursor:pointer;white-space:nowrap}
    .w3-btn:hover{box-shadow:0 8px 16px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19)}
    .w3-btn,.w3-button{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
    .w3-disabled,.w3-btn:disabled,.w3-button:disabled{cursor:not-allowed;opacity:0.3}.w3-disabled *,:disabled *{pointer-events:none}
    .w3-btn.w3-disabled:hover,.w3-btn:disabled:hover{box-shadow:none}
    .w3-dropdown-hover:hover > .w3-button:first-child,.w3-dropdown-click:hover > .w3-button:first-child{background-color:#ccc;color:#000}
    .w3-dropdown-content{cursor:auto;color:#000;background-color:#fff;display:none;position:absolute;min-width:160px;margin:0;padding:0;z-index:1}
    .w3-check,.w3-radio{width:24px;height:24px;position:relative;top:6px}
    .w3-sidebar{height:100%;width:200px;background-color:#fff;position:fixed!important;z-index:1;overflow:auto}
    .w3-bar-block .w3-dropdown-hover,.w3-bar-block .w3-dropdown-click{width:100%}
    .w3-bar-block .w3-dropdown-hover .w3-dropdown-content,.w3-bar-block .w3-dropdown-click .w3-dropdown-content{min-width:100%}
    .w3-bar-block .w3-dropdown-hover .w3-button,.w3-bar-block .w3-dropdown-click .w3-button{width:100%;text-align:left;padding:8px 16px}
    .w3-main,#main{transition:margin-left .4s}
    .w3-modal{z-index:3;display:none;padding-top:100px;position:fixed;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgb(0,0,0);background-color:rgba(0,0,0,0.4)}
    .w3-modal-content{margin:auto;background-color:#fff;position:relative;padding:0;outline:0;width:600px}
    .w3-bar{width:100%;overflow:hidden}.w3-center .w3-bar{display:inline-block;width:auto}
    .w3-bar .w3-bar-item{padding:8px 16px;float:left;width:auto;border:none;display:block;outline:0}
    .w3-bar .w3-dropdown-hover,.w3-bar .w3-dropdown-click{position:static;float:left}
    .w3-bar .w3-button{white-space:normal}
    .w3-select{padding:9px 0;width:100%;border:none;border-bottom:1px solid #ccc}
    .w3-bar-block .w3-bar-item{width:100%;display:block;padding:8px 16px;text-align:left;border:none;white-space:normal;float:none;outline:0}
    .w3-bar-block.w3-center .w3-bar-item{text-align:center}.w3-block{display:block;width:100%}
    .w3-button:hover{color:#000!important;background-color:#f0e1af!important}
    </style>


{#    STYLESHEET    #}


    <div class="w3-sidebar w3-cust w3-border w3-bar-block" style="width:15%">
  <h3 class="w3-bar-item">Модули</h3>
    {% with course=module.course %}
    <ul id="modules">
        {% for m in course.modules.all %}
            <li data-id="{{ m.id }}">
                <a href="{% url "module_content_list" m.id %}" class="w3-bar-item w3-button {% if m == module %} selected {% endif %}">{{ m.order|add:1 }}. {{ m.title }}</a>
            </li>
        {% empty %}
  <a href="#" class="w3-bar-item w3-button">No modules yet</a>
    {% endfor %}
    </ul>
</div>
    <section class="u-align-center u-clearfix u-section-1" id="sec-1b9c">
      <div class="u-table u-table-responsive u-table-1">
        <table class="u-table-entity u-table-entity-1">
          <colgroup>
            <col width="100%">
          </colgroup>
          <tbody class="u-table-body">
            <tr style="height: 82px;">
              <td class="u-border-1 u-border-white u-first-column u-table-cell"></td>
            </tr>
            <tr style="height: 95px;">
              <td class="u-border-1 u-border-white u-first-column u-table-cell"></td>
            </tr>
            <tr style="height: 95px;">
              <td class="u-border-1 u-border-white u-first-column u-table-cell"></td>
            </tr>
            <tr style="height: 95px;">
              <td class="u-border-1 u-border-white u-first-column u-table-cell"></td>
            </tr>
            <tr style="height: 95px;">
              <td class="u-border-1 u-border-white u-first-column u-table-cell"></td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="u-container-style u-group u-white u-group-1">
        <div class="u-container-layout u-valign-top u-container-layout-1">
          <div class="u-border-1 u-border-custom-color-6 u-border-no-left u-border-no-right u-border-no-top u-container-style u-group u-group-2">
            <div class="u-container-layout u-container-layout-2">
              <h4 class="u-custom-font u-font-ubuntu u-text u-text-default u-text-1">Курс "{{ course.title }}". Модуль {{ module.order|add:1 }} {{ module.title }}</h4>
            </div>
          </div>
          <h1 class="u-custom-font u-font-ubuntu u-text u-text-default u-text-2">Содержание модуля:</h1>
    <div id="module-contents">
        {% for content in module.contents.all %}
          <div data-id="{{ content.id }}">
            {% with item=content.item %}
              <p>{{ item }} ({{ item|model_name }})</p>
              <a href="{% url "module_content_update" module.id item|model_name item.id %}">Edit</a>
              <form action="{% url "module_content_delete" content.id %}" method="post">
                <input type="submit" value="Delete">
                {% csrf_token %}
              </form>
            {% endwith %}
          </div>
        {% empty %}
          <p>This module has no contents yet.</p>
        {% endfor %}
      </div>
        <h1 class="u-custom-font u-font-ubuntu u-text u-text-default u-text-2">Добавить содержание:</h1>
            <a href="{% url "module_content_create" module.id "text" %}" class="u-align-left u-border-1 u-border-active-grey-75 u-border-grey-75 u-border-hover-grey-75 u-btn u-btn-round u-button-style u-custom-font u-font-ubuntu u-none u-radius-6 u-text-active-grey-80 u-text-grey-80 u-text-hover-grey-80 u-btn-1">Текст</a>
            <a href="{% url "module_content_create" module.id "image" %}" class="u-align-left u-border-1 u-border-active-grey-75 u-border-grey-75 u-border-hover-grey-75 u-btn u-btn-round u-button-style u-custom-font u-font-ubuntu u-none u-radius-6 u-text-active-grey-80 u-text-grey-80 u-text-hover-grey-80 u-btn-2">Изображение</a>
            <a href="{% url "module_content_create" module.id "video" %}" class="u-align-left u-border-1 u-border-active-grey-75 u-border-grey-75 u-border-hover-grey-75 u-btn u-btn-round u-button-style u-custom-font u-font-ubuntu u-none u-radius-6 u-text-active-grey-80 u-text-grey-80 u-text-hover-grey-80 u-btn-3">Видео</a>
            <a href="{% url "module_content_create" module.id "file" %}" class="u-align-left u-border-1 u-border-active-grey-75 u-border-grey-75 u-border-hover-grey-75 u-btn u-btn-round u-button-style u-custom-font u-font-ubuntu u-none u-radius-6 u-text-active-grey-80 u-text-grey-80 u-text-hover-grey-80 u-btn-4">Файл</a>
            <a href="{% url "module_content_create" module.id "forms" %}" class="u-align-left u-border-1 u-border-active-grey-75 u-border-grey-75 u-border-hover-grey-75 u-btn u-btn-round u-button-style u-custom-font u-font-ubuntu u-none u-radius-6 u-text-active-grey-80 u-text-grey-80 u-text-hover-grey-80 u-btn-5">Тест</a>
        </div>
      </div>
    {% endwith %}
    </section>

{% endblock %}

{% block domready %}
  $('#modules').sortable({
      stop: function(event, ui) {
          modules_order = {};
          $('#modules').children().each(function(){
              // update the order field
              $(this).find('.order').text($(this).index() + 1);
              // associate the module's id with its order
              modules_order[$(this).data('id')] = $(this).index();
          });
          $.ajax({
              type: 'POST',
              url: '{% url "module_order" %}',
              contentType: 'application/json; charset=utf-8',
              dataType: 'json',
                 data: JSON.stringify(modules_order)
             });
      }
  });

  $('#module-contents').sortable({
      stop: function(event, ui) {
          contents_order = {};
          $('#module-contents').children().each(function(){
              // associate the module's id with its order
              contents_order[$(this).data('id')] = $(this).index();
          });

          $.ajax({
              type: 'POST',
              url: '{% url "content_order" %}',
              contentType: 'application/json; charset=utf-8',
              dataType: 'json',
              data: JSON.stringify(contents_order),
          });
      }
  });
{% endblock %}